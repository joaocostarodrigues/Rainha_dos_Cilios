<html>
  <head>
    <meta charset="UTF-8">
    <title> Mapa Interativo JS</title>
    
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../styles.css">
  </head>
  <body>
    <header class="top-bar">
    <div></div>
    <div class="logo" >
        <a href="../../index.html">
        <img src="../../icons/rdc.png" alt="icon" class="rdc" >
        </a>
    </div>

    <br>
    <br>
    <br>
    <br>
    <b></b>
    <b></b>
    <b></b>
    <b></b>
    <b></b>
        
    <a href="https://wa.me/5548999632319?text=Ol%C3%A1%2C%20vim%20do%20site%20Rainha%20dos%20C%C3%ADlios%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es%20sobre%20como%20adquirir%20os%20produtos.">
    <button class="cta-btn">ENTRE EM CONTATO</button >
    </a>
    <div></div>
  </header>

  <br>
  <br>
  <br>
  
    <div class="tudo">
    <div class="row">
      <div class="col-md-6"> 
        <div id="regions_div" style="width: 900px; height: 500px;"></div>
      </div>
        <div class="col-md-6 feature">
          <h4 style="color:#7e294b;font-family: 'Poppins', sans-serif;">Selecione uma de nossas <br><b style="color:#7e294b;font-family: 'Poppins', sans-serif;">unidades, e solicite um</b></h3>
          <p><b style="background-color:#7e294b;color:white;font-size:1.5em;font-family: 'Poppins', sans-serif;"></b></p><br>
          <select id="seletorCombo" style="width: 50%;">
          <option>Selecione um Estado</option>
            <option value="1">Acre</option>
            <option value="2">Alagoas</option>
            <option value="3">Amapa</option>
            <option value="4">Amazonas</option>
            <option value="5">Bahia</option>
            <option value="6">Ceara</option>
            <option value="7">Distrito Federal</option>
            <option value="8">Espirito Santo</option>
            <option value="9">Goias</option>
            <option value="10">Maranhão</option>
            <option value="11">Mato Grosso</option>
            <option value="12">Mato Grosso do Sul</option>
            <option value="13">Minas Gerais</option>
            <option value="14">Para</option>
            <option value="15">Paraíba</option>
            <option value="16">Parana</option>
            <option value="17">Pernambuco</option>
            <option value="18">Piaui</option>
            <option value="19">Rio de Janeiro</option>
            <option value="20">Rio Grande do Norte</option>
            <option value="21">Rio Grande do Sul</option>
            <option value="22">Rondonia</option>
            <option value="23">Roraima</option>
            <option value="24">Santa Catarina</option>
            <option value="25">Sao Paulo</option>
            <option value="26">Sergipe</option>
            <option value="27">Tocantins</option>
          </select>
          <h4>Unidades em <span id="estado"></span>:<h4>
          <div id="dadosLojas" style="overflow-y: scroll; height:200px;"> 

          </div>
        </div>
    </div>
    </div>

    <br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
    <div class="br-footer">
  <div class="reta"></div>
</div>

  <footer class="footer">
  <div class="footer-container">

    <!-- Logo -->
    <div class="logo-footer">
      <img src="../icons/rdc2.png" alt="Logo do Site">
    </div>

    <!-- Sobre -->
    <div class="footer-box">
      <h3>SOBRE</h3>
      <p>Na Rainha dos Cílios, cada produto é feito com materiais de alta performance, pensados para facilitar o trabalho das profissionais e entregar resultados impecáveis. </p>
    </div>

    <!-- Navegação -->
    <div class="footer-box">
      <h3>NAVEGUE</h3>
      <ul>
        <li><a href="../../index.html">INÍCIO</a></li>
        <li><a href="#produtos">PRODUTOS</a></li>
        <li><a href="guias/politica/politica.html">POlÍTICA</a></li>
        <li><a href="https://wa.me/5548999632319?text=Ol%C3%A1%2C%20vim%20do%20site%20Rainha%20dos%20C%C3%ADlios%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es%20sobre%20como%20adquirir%20os%20produtos.">CONTATO</a></li>
        <li><a href="">ONDE ENCONTRAR</a></li>
      </ul>
    </div>

    <!-- Contato -->
    <div class="footer-box">
      <h3>ENTRE EM CONTATO</h3>
      <div class="informacoes-box">
        <div class="informacoes">
        <img src="../icons/icon_gmail.png" alt="email">
        <p>sac@rainhadoscilios.com.br</p>
        </div>

        <div class="informacoes">
        <img src="../icons/icon_telefone.png" alt="contato">
        <p>(48) 99963-2319</p>
        </div>

        <div class="informacoes">
        <img src="../icons/icon_local.png" alt="local">
        <p>R. Francisco Jacinto de Melo,75 - Sala 01 Areias - São José - SC, 88113-300</p>
        </div>

      </div>
    </div>

    <!-- Redes Sociais -->
    <div class="footer-box">
      <h3>FOLLOW US</h3>
      <div class="social-icons">
        <a href="https://www.instagram.com/rainhadoscilios.oficial/" target="_blank">
          <img src="../redes/instagram.png" alt="Instagram">
        </a>
        <a href="https://wa.me/5548999632319?text=Ol%C3%A1%2C%20vim%20do%20site%20Rainha%20dos%20C%C3%ADlios%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es%20sobre%20como%20adquirir%20os%20produtos." target="_blank">
          <img src="../redes/whatsapp.png" alt="WhatsApp">
        </a>
      </div>
    </div>

  </div>
</footer>

  <footer class="footer-simples">
  <p>Desenvolvido por João Vitor • Contato: (48) 99654-6796</p>
  </footer>
  </body>
</html>

    <script type="text/javascript" src="js/loader.js"></script>
    <script type="text/javascript" src="js/jsapi.js"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>

    <script type="text/javascript">
      google.charts.load('current', {'packages':['geochart']});
      google.charts.setOnLoadCallback(drawRegionsMap);

      dicEstados = {
          '1' : 'Acre',
          '2' : 'Alagoas',
          '3' : 'Amapa',
          '4' : 'Amazonas',
          '5' : 'Bahia',
          '6' : 'Ceara',
          '7' : 'Distrito Federal',
          '8' : 'Espirito Santo',
          '9' : 'Goias',
          '10' : 'Maranhao',
          '11' : 'Mato Grosso',
          '12' : 'Mato Grosso do Sul',
          '13' : 'Minas Gerais',
          '14' : 'Para',
          '15' : 'Paraiba',
          '16' : 'Parana',
          '17' : 'Pernambuco',
          '18' : 'Piaui',
          '19' : 'Rio de Janeiro',
          '20' : 'Rio Grande do Norte',
          '21' : 'Rio Grande do Sul',
          '22' : 'Rondonia',
          '23' : 'Roraima',
          '24' : 'Santa Catarina',
          '25' : 'Sao Paulo',
          '26' : 'Sergipe',
          '27' : 'Tocantins'
        }
        //o array abaixo pode ser alimentado por uma base de dados, ou api rest. no exemplo, deixei fixo.
        unidades = {
          'Acre': 
          {
            
          },
          'Rio Grande do Sul':
           {
            '0' : 
            {
              'Loja' : 'Eylash Shop',
              'Fone' : '+55 (51) 99805-9856',
              'Endereco' : 'R. Marquês do Herval, 320 - Sala 02 - Centro, Campo Bom - RS'
            }
          },
          'Santa Catarina':
           {
            '0' : 
            {
              'Loja' : 'Casa da Extensionista',
              'Fone' : '+55 (49) 99828-9792',
              'Endereco' : 'R. Barão do Rio Branco, 76e - Centro, Chapecó'
            }, '1' :
            {
              'Loja' : 'Casa dos Cílios',
              'Fone' : '+55 (47) 99237-7330',
              'Endereco' : 'R. São José do Cerrito, 108 - Petrópolis, Joinville'
            },'2' :
            {
              'Loja' : 'Priscila Prestes Store',
              'Fone' : '+55 (47) 99972-9044',
              'Endereco' : 'R. Jovita Azevedo, 154 - Costa e Silva - Joinville'
            }, '3' :
            {
              'Loja' : 'GERALDO KMIECIK PAZ',
              'Fone' : '+55 (47) 99965-6124',
              'Endereco' : 'R. Max Eugenio Roberto Ziemann, 223, Czerniewicz, Jaraguá Do Sul'
            }
          },
          'Minas Gerais':
           {
            '0' : 
            {
              'Loja' : 'GL cílios Store',
              'Fone' : '+55 (31) 99735-8220',
              'Endereco' : 'R. José Caetano de Lima, 75 - Aleixa Ferreira, Sarzedo - MG'
            }
          }
        }

      var ultimoEstadoSelecionado = '';


      function drawRegionsMap() {

        var data = google.visualization.arrayToDataTable([
          ['Country'],
          ['Brazil'],
          ['Acre'],
          ['Alagoas'],
          ['Amapa'],
          ['Amazonas'],
          ['Bahia'],
          ['Ceara'],
          ['Distrito Federal'],
          ['Espirito Santo'],
          ['Goias'],
          ['Maranhao'],
          ['Mato Grosso'],
          ['Mato Grosso do Sul'],
          ['Minas Gerais'],
          ['Para'],
          ['Paraiba'],
          ['Parana'],
          ['Pernambuco'],
          ['Piaui'],
          ['Rio de Janeiro'],
          ['Rio Grande do Norte'],
          ['Rio Grande do Sul'],
          ['Rondonia'],
          ['Roraima'],
          ['Santa Catarina'],
          ['Sao Paulo'],
          ['Sergipe'],
          ['Tocantins']
        ]);

        var options = {
           region: 'BR',
           resolution: 'provinces',
           datalessRegionColor: 'white',
           defaultColor: '#F1F2F3',
           enableRegionInteractivity: true
        };

        var chart = new google.visualization.GeoChart(document.getElementById('regions_div'));
        
        function myClickHandler(){
          var selection = chart.getSelection();
          var message = '';
          for (var i = 0; i < selection.length; i++) {
              var item = selection[i];
              if (item.row != null && item.column != null) {
                  message += '{' + item.row + ',column:' + item.column + '}';
              } else if (item.row != null) {
                  message += '' + item.row + '';
              } else if (item.column != null) {
                  message += '{column:' + item.column + '}';
              }
          }
          if (message == '') {
              message = ultimoEstadoSelecionado;
          }else{
              ultimoEstadoSelecionado = message;
          }
            document.getElementById("dadosLojas").innerHTML = '';
            for(var i = 0; i < Object.keys(unidades).length; i ++){ 
              document.getElementById("estado").innerHTML = dicEstados[message];
              //Ponto de melhoria, percorrer o array apenas nos itens relacionados ao estado clicado/marcado. (lazy)
              if(unidades[dicEstados[message]][i] != undefined){
                document.getElementById("dadosLojas").innerHTML += 
                '<br>Unidade: ' + 
                unidades[dicEstados[message]][i]['Loja'] + 
                '<br>Fone: ' + 
                unidades[dicEstados[message]][i]['Fone'] + 
                '<br>Endereco: ' 
                + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
              }             
            }
          }

          google.visualization.events.addListener(chart, 'select', myClickHandler);

          chart.draw(data, options);

          $('#seletorCombo').change(function(){
            valEstado = $(this).val();
            arraySelection = [];
            arraySelection.push({column:null,row:Number(valEstado)});


            function myComboHandler(option){
              var selection = option;
              console.log(selection);
              var message = '';
              for (var i = 0; i < selection.length; i++) {
                  var item = selection[i];
                  if (item.row != null && item.column != null) {
                      message += '{' + item.row + ',column:' + item.column + '}';
                  } else if (item.row != null) {
                      message += '' + item.row + '';
                  } else if (item.column != null) {
                      message += '{column:' + item.column + '}';
                  }
              }
              if (message == '') {
                  message = 'nothing';
                  return false;
              }
                document.getElementById("dadosLojas").innerHTML = '';
                for(var i = 0; i < Object.keys(unidades).length;  i ++){ 
                  document.getElementById("estado").innerHTML = dicEstados[message];
                  document.getElementById("dadosLojas").innerHTML += 
                  '<br>Unidade: ' + 
                  unidades[dicEstados[message]][i]['Loja'] + 
                  '<br>Fone: ' + 
                  unidades[dicEstados[message]][i]['Fone'] + 
                  '<br>Endereco: ' 
                  + unidades[dicEstados[message]][i]['Endereco'] + '<br>';
                }
              }
            

            google.visualization.events.addListener(chart, 'select', myComboHandler);

              chart.draw(data, options);

              myComboHandler(arraySelection);
        });
      }

      



    </script>
